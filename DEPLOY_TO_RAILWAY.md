# 🚀 Развертывание Poker Simulator на Railway

## ✅ Подготовка завершена!

Проект успешно обновлен на GitHub с исправлениями:
- 🔐 Исправлена аутентификация JWT
- 👤 Восстановлен доступ пользователей к HandHistory 
- 💰 Исправлен расчет банка в раздачах
- 🌐 Улучшена WebSocket аутентификация

## 🚂 Развертывание на Railway

### Шаг 1: Создание проекта на Railway

1. 🌐 Перейдите на [railway.app](https://railway.app)
2. 🔑 Войдите через GitHub аккаунт
3. ➕ Нажмите **"New Project"**
4. 📁 Выберите **"Deploy from GitHub repo"**
5. 🔍 Найдите и выберите репозиторий **`M9nka1/Poker-sim2`**

### Шаг 2: Настройка переменных окружения

В разделе **Variables** добавьте следующие переменные:

```env
NODE_ENV=production
JWT_SECRET=поменяйте-на-длинный-сложный-секретный-ключ-32-символа-минимум
JWT_REFRESH_SECRET=поменяйте-на-другой-длинный-сложный-секретный-ключ-32-символа
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12
DB_PATH=./database/poker_simulator.db
```

### Шаг 3: Настройка домена (опционально)

1. 🌐 В разделе **Settings** → **Domains**
2. 📝 Добавьте свой домен или используйте предоставленный Railway

### Шаг 4: Развертывание

1. 🚀 Railway автоматически начнет развертывание после настройки
2. ⏳ Ждите завершения сборки (обычно 2-3 минуты)
3. ✅ После завершения получите URL приложения

## 🔧 Особенности развертывания

### База данных
- 📦 SQLite создается автоматически при первом запуске
- 👤 Администратор создается автоматически при инициализации
- 🔐 Данные для входа: `admin@pokersimu.com` / `AdminPassword123!`

### Инициализация
При первом запуске на Railway:
1. ✅ Создается SQLite база данных
2. 👑 Создается администратор по умолчанию
3. 🗂️ Инициализируются таблицы
4. 📁 Создается папка для HandHistory файлов

## 🎯 После развертывания

### Проверка работоспособности:
1. 🌐 Откройте URL Railway приложения
2. 🔑 Войдите как администратор
3. 🃏 Попробуйте сыграть тестовую раздачу
4. 📊 Проверьте загрузку HandHistory файлов

### Настройка домена:
1. 🔗 Добавьте свой домен в Railway
2. 📝 Настройте DNS записи
3. 🔒 SSL сертификат настроится автоматически

## 🆘 Решение проблем

### Ошибки JWT:
- ✅ Убедитесь, что `JWT_SECRET` установлен в переменных
- 🔑 Секрет должен быть длиннее 32 символов

### Проблемы с базой данных:
- 📁 Railway автоматически создаст папку `database/`
- 🗃️ SQLite файл создается при первом запуске

### Ошибки аутентификации:
- 👤 Используйте: `admin@pokersimu.com` / `AdminPassword123!`
- 🔄 При необходимости перезапустите приложение в Railway

## 📞 Поддержка

После успешного развертывания ваш Poker Simulator будет доступен 24/7 с:
- 🎮 Мультиплеер поддержкой
- 🔐 Полной аутентификацией  
- 📊 Экспортом HandHistory для трекеров
- 🃏 4 игровыми столами одновременно

---

**Статус проекта**: ✅ Готов к развертыванию  
**GitHub**: https://github.com/M9nka1/Poker-sim2  
**Последнее обновление**: Исправления аутентификации и HandHistory 